<div class="calendar-container">
  <div class="calendar-header">
    <button mat-icon-button (click)="previousMonth()">
      <mat-icon>chevron_left</mat-icon>
    </button>
    <h2>{{ currentDate | date:'MMMM yyyy' }}</h2>
    <button mat-icon-button (click)="nextMonth()">
      <mat-icon>chevron_right</mat-icon>
    </button>
  </div>
  <div class="calendar-body">
    <div class="weekdays">
      <div *ngFor="let day of ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']" class="weekday">{{ day }}</div>
    </div>
    <div class="weeks">
      <div class="week" *ngFor="let week of weeks">
        <div class="day" *ngFor="let day of week; let dayIndex = index"
             [ngClass]="{'other-month': !isCurrentMonth(day)}"
             (click)="openAppointmentDialog(getDateFromDay(day))">
          <div class="date">{{ day }}</div>
          <div class="appointments">
            <div *ngFor="let apt of getAppointmentsForDate(getDateFromDay(day)) | async" class="appointment">
              {{ apt.title }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>